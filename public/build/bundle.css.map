{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport FeedMe from 'feedme'\n\timport striptags from 'striptags'\n\timport subscriptions from '../subscriptions.json'\n\n  // Some RSS feeds can't be loaded in the browser due to CORS security.\n  // To get around this, we use a proxy\n\tconst CORS_PROXY = 'https://cors-anywhere.herokuapp.com/'\n\tconst DESCRIPTION_LENGTH = 500\n\tconst ALLOWED_TAGS = ['a', 'img', 'strong', 'picture', 'figure', 'figcaption']\n\n\tlet allEntries = []\n\n\tconst parseFeedDescription = (str, baseUrl) => {\n\t\tconst excerpt = str.substring(0, DESCRIPTION_LENGTH)\n\t\tconst tempNode = document.createElement('div')\n\t\ttempNode.innerHTML = excerpt\n\n\t\tconst allElements = Array.from(tempNode.querySelectorAll('*'))\n\t\tallElements.forEach(el => {\n\t\t\tel.removeAttribute('style')\n\t\t\tel.removeAttribute('class')\n\t\t})\n\n\t\tconst imageElements = Array.from(tempNode.querySelectorAll('img'))\n\t\timageElements.forEach(el => {\n\t\t\tconst isRelativeUrl = new RegExp('^(?:[a-z]+:)?//', 'i')\n\t\t\tconst imageSrc = el.getAttribute('src')\n\t\t\tif (!isRelativeUrl.test(imageSrc)) {\n\t\t\t\tconst absoluteUrl = new URL(imageSrc, baseUrl)\n\t\t\t\tel.src = absoluteUrl.href\n\t\t\t}\n\t\t})\n\n\t\tlet parsedString = tempNode.innerHTML\n\t\tparsedString = striptags(parsedString, ALLOWED_TAGS)\n\t\treturn parsedString\n\t}\n\n\tfunction getFeed (url) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfetch(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\tconst err = new Error(`${url} returned status code ${response.status}`)\n\t\t\t\t\t\treject(err)\n\t\t\t\t\t}\n\t\t\t\t\treturn response\n\t\t\t\t})\n\t\t\t\t.catch(err => reject(err))\n\t\t\t\t.then(response => response.text())\n\t\t\t\t.then(feedString => {\n\t\t\t\t\tlet itemCount = 0\n\t\t\t\t\tconst feed = {\n\t\t\t\t\t\titems: []\n\t\t\t\t\t}\n\t\t\t\t\tconst parser = new FeedMe()\n\t\t\t\t\tparser.on('error', (err) => reject(err))\n\t\t\t\t\tparser.on('title', (title) => {\n\t\t\t\t\t\tfeed.title = title\n\t\t\t\t\t})\n\t\t\t\t\tparser.on('item', (item) => {\n\t\t\t\t\t\t// Stop parsing once we have 5 items\n\t\t\t\t\t\tif (itemCount === 5) {\n\t\t\t\t\t\t\tresolve(feed)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfeed.items.push(item)\n\t\t\t\t\t\t\titemCount++\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tparser.on('link', (link) => {\n\t\t\t\t\t\tif (typeof link === 'object' && link.rel === 'alternate') {\n\t\t\t\t\t\t\tfeed.link = link.href\n\t\t\t\t\t\t} else if (typeof link === 'string') {\n\t\t\t\t\t\t\tfeed.link = link\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tparser.on('home_page_url', (link) => {\n\t\t\t\t\t\tfeed.link = link\n\t\t\t\t\t})\n\n\t\t\t\t\tconst onUpdatedDate = (date) => {\n\t\t\t\t\t\tfeed.updated = date\n\t\t\t\t\t}\n\t\t\t\t\tparser.once('pubdate', onUpdatedDate)\n\t\t\t\t\tparser.once('lastbuilddate', onUpdatedDate)\n\t\t\t\t\tparser.once('updated', onUpdatedDate)\n\n\t\t\t\t\tparser.write(feedString)\n\t\t\t})\n\t\t})\n\t}\n\t\n\tfunction sortFeedsByDate () {\n\t\tallEntries.sort((a, b) => (a.unixTime < b.unixTime) ? 1 : -1)\n\t}\n\n\tfunction unixToHumanDate (unixTime) {\n\t\tconst date = new Date(unixTime)\n\t\tconst year = date.getFullYear()\n\t\tconst month = date.getMonth()\n\t\tconst day = date.getDate()\n\t\tconst hours = date.getHours()\n\t\tconst minutes = '0' + date.getMinutes()\n\t\tconst seconds = '0' + date.getSeconds()\n\n \t\tconst humanTimestamp = day + '.' + month + '.' + year + ' ' + hours + ':' + minutes.substr(-2)\n\t\treturn humanTimestamp\n\t}\n\n  async function parseFeeds (feedList) {\n\t\tconsole.log('Loading your subscriptions...')\n\t\tconsole.log(feedList)\n    feedList.forEach((feedURL) => {\n\t\t\tgetFeed(CORS_PROXY + feedURL)\n\t\t\t\t.then(feed => {\n\t\t\t\t\tconst currentFeedEntries = parseSingleFeed(feed)\n\t\t\t\t\tallEntries = [...allEntries, ...currentFeedEntries]\n\t\t\t\t\tsortFeedsByDate()\n\t\t\t\t})\n\t\t\t\t.catch(err => console.error(err))\n\t\t})\n  }\n\n  function parseSingleFeed (feed) {\n\t\tconsole.log('Parsing:', feed.title)\n\t\tconst entries = []\n\n    feed.items.forEach(item => {\n      const entry = {\n\t\t\t\tfeed: {\n\t\t\t\t\ttitle: feed.title,\n\t\t\t\t\tlink: feed.link\n\t\t\t\t},\n        title: item.title || null,\n        pubDate: item.updated || item.pubdate || item.date_published\n\t\t\t}\n\n\t\t\tif (item.url) {\n\t\t\t\tentry.link = item.url\n\t\t\t}\n\t\n\t\t\tif (item.link) {\n\t\t\t\tentry.link = item.link\n\t\t\t}\n\n\t\t\tif (item.link && item.link.href) {\n\t\t\t\tentry.link = item.link.href\n\t\t\t}\n\n\t\t\tif (Array.isArray(item.link)) {\n\t\t\t\titem.link.forEach((url) => {\n\t\t\t\t\tif (url.rel === 'alternate') {\n\t\t\t\t\t\tentry.link = url.href\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t\tif (item.content) {\n\t\t\t\tentry.excerpt = parseFeedDescription(item.content, feed.link)\n\t\t\t}\n\n\t\t\tif (item.description) {\n\t\t\t\tentry.excerpt = parseFeedDescription(item.description, feed.link)\n\t\t\t}\n\n\t\t\tif (item.content_html) {\n\t\t\t\tentry.excerpt = parseFeedDescription(item.content_html, feed.link)\n\t\t\t}\n\n\t\t\tentry.unixTime = new Date(entry.pubDate).valueOf()\n\t\t\tentry.humanTimestamp = new Date(entry.pubDate)\n\n\t\t\tentries.push(entry)\n\t\t})\n\n\t\treturn entries\n  }\n\n\tparseFeeds(subscriptions.list)\n</script>\n\n<style>\n  main {\n    font-family: 'Avenir Next', Avenir, '-apple-system', Helvetica, Arial, sans-serif;\n\t\tmax-width: 600px;\n\t\tmargin: auto;\n  }\n\n\t.solar-mars-title {\n\t\tmargin-top: 20px;\n\t\tmargin-bottom: 50px;\n\t}\n\n\t.solar-mars-title img {\n\t\tdisplay: inline-block;\n\t\twidth: 30px;\n\t\theight: 30px;\n\t\tfill: currentColor;\n\t}\n\n\t.solar-mars-title a {\n\t\tcolor: var(--hot-pink);\n\t\ttext-decoration: none;\n\t}\n\n\tarticle {\n\t\tmargin-bottom: 70px;\n\t}\n\n\tarticle header {\n\t\tmargin-bottom: 15px;\n\t}\n\n\tarticle header h2 {\n\t\tfont-size: 16px;\n\t\tfont-weight: normal;\n\t\tmargin-bottom: 2px;\n\t}\n\n\tarticle header h2 a {\n\t\tcolor: var( --mid-gray);\n\t\ttext-decoration: none;\n\t}\n\n\tarticle header h1 {\n\t\tfont-size: 20px;\n\t}\n\n\tarticle header h1 a {\n\t\tcolor: var(--dark-gray);\n\t\ttext-decoration: none;\n\t}\n\n\t.entry-content {\n\t\tfont-size: 18px;\n\t\tmargin-bottom: 15px;\n\t}\n\n\t.entry-content :global(a) {\n\t\tcolor: var(--pink);\n\t}\n\n\t.entry-content :global(img) {\n\t\tmargin: 1em 0;\n\t}\n\n\tdate {\n\t\tdisplay: block;\n\t\tfont-size: 12px;\n\t\tfont-weight: 500;\n\t}\n\n\tdate a {\n\t\tcolor: var(--gray);\n\t\ttext-decoration: none;\n\t}\n</style>\n\n<main>\n  <h1 class=\"solar-mars-title\">\n\t\t<a href=\"/\">\n\t\t\t<img alt=\"Solar Mars logo: a pink telescope\" src=\"/favicon.svg\">\n\t\t\tSolar Mars\n\t\t</a>\n\t</h1>\n\n\t{#each allEntries as entry}\n\t\t<article>\n\t\t\t<header>\n\t\t\t\t{#if entry.feed.title}\n\t\t\t\t\t<h2><a href=\"{entry.feed.link}\">{entry.feed.title}</a></h2>\n\t\t\t\t{/if}\n\t\t\t\t{#if entry.title}\n\t\t\t\t\t<h1><a href=\"{entry.link}\">{entry.title}</a></h1>\n\t\t\t\t{/if}\n\t\t\t</header>\n\t\t\t<div class=\"entry-content\">\n\t\t\t\t{@html entry.excerpt}...\n\t\t\t</div>\n\t\t\t<date>\n\t\t\t\t<a class=\"pink\" href=\"{entry.link}\">â†’ {unixToHumanDate(entry.pubDate)}</a>\n\t\t\t</date>\n\t\t</article>\n\t{:else}\n\t\tLoading...\n\t{/each}\n</main>\n"
  ],
  "names": [],
  "mappings": "AAuLE,IAAI,0CAAC,CAAC,AACJ,WAAW,CAAE,aAAa,CAAC,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CACnF,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,AACZ,CAAC,AAEF,iBAAiB,0CAAC,CAAC,AAClB,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,6CAAiB,CAAC,GAAG,4BAAC,CAAC,AACtB,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,YAAY,AACnB,CAAC,AAED,6CAAiB,CAAC,CAAC,4BAAC,CAAC,AACpB,KAAK,CAAE,IAAI,UAAU,CAAC,CACtB,eAAe,CAAE,IAAI,AACtB,CAAC,AAED,OAAO,0CAAC,CAAC,AACR,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,mCAAO,CAAC,MAAM,4BAAC,CAAC,AACf,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,mCAAO,CAAC,MAAM,CAAC,EAAE,4BAAC,CAAC,AAClB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,GAAG,AACnB,CAAC,AAED,mCAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,4BAAC,CAAC,AACpB,KAAK,CAAE,KAAK,UAAU,CAAC,CACvB,eAAe,CAAE,IAAI,AACtB,CAAC,AAED,mCAAO,CAAC,MAAM,CAAC,EAAE,4BAAC,CAAC,AAClB,SAAS,CAAE,IAAI,AAChB,CAAC,AAED,qBAAO,CAAC,MAAM,CAAC,gBAAE,CAAC,CAAC,cAAC,CAAC,AACpB,KAAK,CAAE,IAAI,WAAW,CAAC,CACvB,eAAe,CAAE,IAAI,AACtB,CAAC,AAED,cAAc,0CAAC,CAAC,AACf,SAAS,CAAE,IAAI,CACf,aAAa,CAAE,IAAI,AACpB,CAAC,AAED,wDAAc,CAAC,AAAQ,CAAC,AAAE,CAAC,AAC1B,KAAK,CAAE,IAAI,MAAM,CAAC,AACnB,CAAC,AAED,wDAAc,CAAC,AAAQ,GAAG,AAAE,CAAC,AAC5B,MAAM,CAAE,GAAG,CAAC,CAAC,AACd,CAAC,AAED,IAAI,0CAAC,CAAC,AACL,OAAO,CAAE,KAAK,CACd,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,AACjB,CAAC,AAED,gCAAI,CAAC,CAAC,4BAAC,CAAC,AACP,KAAK,CAAE,IAAI,MAAM,CAAC,CAClB,eAAe,CAAE,IAAI,AACtB,CAAC"
}